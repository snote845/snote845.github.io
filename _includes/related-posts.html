<!-- ç›¸å…³æ–‡ç« æŽ¨è -->
{% if page.layout == 'post' %}
  <div class="related-posts">
    <h3>ðŸ“š ç›¸å…³æ–‡ç« </h3>
    <ul>
      {% for post in site.posts %}
        {% assign has_related_tag = false %}
        {% for tag in post.tags %}
          {% if page.tags contains tag %}
            {% assign has_related_tag = true %}
            {% break %}
          {% endif %}
        {% endfor %}
        
        {% assign has_related_category = false %}
        {% for category in post.categories %}
          {% if page.categories contains category %}
            {% assign has_related_category = true %}
            {% break %}
          {% endif %}
        {% endfor %}
        
        {% if post.url != page.url and (has_related_tag or has_related_category) %}
          <li>
            <a href="{{ post.url | relative_url }}">
              <span>{{ post.title }}</span>
              <small class="text-muted">{{ post.date | date: "%Y-%m-%d" }}</small>
            </a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
{% endif %}

<style>
  .related-posts {
    margin-top: 3rem;
    padding: 1.5rem;
    background: var(--card-bg);
    border-radius: 8px;
    border: 1px solid var(--card-border);
  }

  .related-posts h3 {
    margin-bottom: 1rem;
    font-size: 1.25rem;
    color: var(--heading-color);
  }

  .related-posts ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .related-posts li {
    margin-bottom: 0.75rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--border-color);
  }

  .related-posts li:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
  }

  .related-posts a {
    display: flex;
    justify-content: space-between;
    align-items: center;
    text-decoration: none;
    color: var(--text-color);
    transition: color 0.2s ease;
  }

  .related-posts a:hover {
    color: var(--link-color);
  }

  .related-posts a span {
    flex: 1;
  }

  .related-posts small {
    margin-left: 1rem;
    font-size: 0.875rem;
  }
</style>
